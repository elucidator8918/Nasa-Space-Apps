<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Elaira - STAR Assistant</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Festive&display=swap" rel="stylesheet">
    <style>
        /* Reset some default styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        /* Apply a background image */
        body {
            background-image: url('https://cdn.pixabay.com/photo/2023/01/10/10/47/space-7709489_1280.jpg');
            background-size: cover;
            background-repeat: no-repeat;
            font-family: 'Arial', sans-serif;
            background-attachment: fixed;
            color: #333; /* Text color for better readability */
        }
        

        /* Header and Navbar Styles */
        header {
            background-size: cover;
            background-repeat: no-repeat;
            padding: 20px 0; /* Increase padding for more space */
            position: fixed;
            top: 0;
            left: 40px;
            right: 60px;
            z-index: 1000;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            margin-left: 20px;
            border-radius: 50%;
            overflow: hidden;
            width: 100px; /* Slightly larger logo */
            height: 100px; /* Slightly larger logo */
        }

        .logo img {
            width: 100%;
            height: 100%;
            object-fit: cover; /* Ensure the entire logo is visible */
        }

        .nav {
            margin-right: 20px;
            display: flex;
            align-items: center;
        }

        .nav ul {
            list-style: none;
            display: flex;
            gap: 20px;
        }

        .nav li {
            display: inline;
        }

        .nav a {
            text-decoration: none;
            color: #fff;
            font-size: 20px; /* Larger font size */
            transition: color 0.3s;
        }

        .nav a:hover {
            color: #ffa8ddf2;
        }

        /* Footer Styles */
footer {
    padding: 20px 0; /* Increase padding for more space */
    position: fixed;
    bottom: 0;
    left: 60px;
    right: 60px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    color: #fff;
    z-index: 1001;
}

/* Style the footer links */
footer ul {
    list-style: none;
    display: flex;
    gap: 20px;
    margin: 0; /* Remove default margin */
    padding: 0; /* Remove default padding */
}

footer a {
    text-decoration: none;
    color: #fff;
    font-size: 10px; /* Larger font size */
    transition: color 0.3s;
}

footer a:hover {
    color: #ffa8ddf2;
}

/* Add spacing between footer options */
footer p {
    margin: 0; /* Remove default margin */
    font-size: 10px; /* Larger font size */
    transition: color 0.3s;
}


        /* Search Bar Styles */
            .search-container {
        text-align: center;
        position: absolute;
        top: 200px; /* Adjust the top position to leave some space from the navbar */
        left: 50%;
        transform: translateX(-50%);
        background-color: rgba(0, 0, 0, 0.7);
        padding: 30px;
        border-radius: 20px;
    }

    .search-button-container {
        margin-bottom: 20px; /* Add some space between the search button and chatbox */
    }
        .search-input {
            width: 500px;
            padding: 10px;
            border: none;
            border-radius: 5px;
            font-size: 20px;
            margin-bottom: 10px;
        }

        .search-button {
            background-color: #001eff;
            color: #fff;
            border: none;
            border-radius: 5px;
            padding: 10px 15px; /* Adjust padding for a smaller button */
            font-size: 15px; 
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .search-button:hover {
            background-color: #0000ff;
        }

        /* Chatbox styles */
        #chatbox {
            display: none;
            position: fixed;
            bottom: 70px;
            left: 50%;
            transform: translateX(-50%);
            width: 800px;
            max-height: 800px; /* Set a maximum height for the chatbox */
            overflow-y: auto; /* Add a vertical scrollbar when content overflows */
            background-color: rgba(0, 0, 0, 0.7);
            border-radius: 10px;
            padding: 20px;
            color: #fff;
            z-index: 1001;            
        }


        #chatbox .user-message {
            margin-bottom:  10px;
            text-align: right;
            font-size: 15px;
        }

        #chatbox .system-message {
            margin-bottom:  10px;
            text-align: left;
            font-size: 15px;
        }

        /* Close button for the chatbox */
        #close-button {
            position: absolute;
            top: 5px;
            right: 5px;
            margin-bottom:  10px;
            background-color: transparent;
            border: none;
            color: #fff;
            cursor: pointer;
        }

                /* Add styles for the website name */
        .website-name {
            margin-left: -800px; /* Adjust the margin as needed */
            color: #fff;
            font-family: 'Festive', cursive;
            font-size: 70px;
        }

        
    </style>
</head>
<body>
    <div id ="assistant">
    <header>
        <div class="logo">
            <img src="https://i.pinimg.com/564x/6e/06/a1/6e06a17623ca180fa3fef2dd5ad54122.jpg" alt="Logo">
        </div>
        <div class="website-name">
            Elaira
        </div>
        <div class="nav">
            <ul>
                <li><a href="/">Home</a></li>
                <li><a href="/assistant">Assistant</a></li>
            </ul>
        </div>
    </header>

    <!-- Content of your webpage goes here -->

    <footer>
        <ul>
            <li><a href="#">Contact</a></li>
            <li><a href="#">About</a></li>
        </ul>
        <p>&copy; Elaira. All rights reserved.</p>
    </footer>
    

    <!-- Search Bar -->
    <div class="search-container">
        <input id="search-input" class="search-input" type="text" placeholder="Type your question here">
        <button id="search-button" class="search-button">chat</button>
    </div>

     <!-- Chatbox -->
     <div id="chatbox">
        <button id="close-button">Close</button>
        <div id="chat"></div>
    </div>

    <script>
        // Wrap your JavaScript code in a DOMContentLoaded event listener
        document.addEventListener("DOMContentLoaded", function() {
            const apiUrl = "https://8f57-34-73-188-205.ngrok-free.app/query/";

            // Function to open the chatbox
            function openChatbox() {
                const chatbox = document.getElementById("chatbox");
                chatbox.style.display = "block";
            }

            // Function to close the chatbox
            function closeChatbox() {
                const chatbox = document.getElementById("chatbox");
                chatbox.style.display = "none";
            }

            // Function to add a message to the chat conversation
            function addMessage(sender, message) {
                const chat = document.getElementById("chat");
                const messageElement = document.createElement("div");
                messageElement.className = sender === "user" ? "user-message" : "system-message";
                messageElement.textContent = message;
                chat.appendChild(messageElement);
            }

            // Function to perform the search and display the conversation
            function performSearch() {
    const inputField = document.getElementById("search-input");
    const userInput = inputField.value.trim();

    if (userInput === "") {
        return;
    }

    // Display user message in the chat
    addMessage("user", userInput);

    // Perform the API request
    const inputData = {
        text: userInput,
    };

    fetch(apiUrl, {
        method: "POST",
        headers: {
            "Content-Type": "application/json",
        },
        body: JSON.stringify(inputData),
    })
    .then(response => response.json())
    .then(data => {
        const output = data.output;

        // Display API response as a system message in the chat
        addMessage("system", output);
    })
    .catch(error => {
        console.error("Error:", error);
    });

    // Clear the input field
    inputField.value = "";
}


            // Event listener to open the chatbox when the search button is clicked
            document.getElementById("search-button").addEventListener("click", openChatbox);

            // Event listener to perform the search when the user presses Enter in the input field
            document.getElementById("search-input").addEventListener("keydown", function(event) {
                if (event.key === "Enter") {
                    performSearch();
                }
            });

            // Event listener to close the chatbox when the close button is clicked
            document.getElementById("close-button").addEventListener("click", closeChatbox);
        });
    </script>
    </div>
</body>
</html>
